const t=[...document.getElementById("rows").content.children],n=16,e=document.getElementById("reviews"),c=[];for(const t of document.getElementsByClassName("page-controls")){const n=document.createElement("button"),e=document.createElement("button"),o=document.createElement("button"),r=document.createElement("button"),s=document.createElement("button");n.append("0"),o.append("<"),r.append(">"),n.classList.add("pretty"),e.classList.add("pretty"),o.classList.add("pretty"),r.classList.add("pretty"),s.classList.add("pretty"),t.append(n,o,s,r,e),c.push({t:n,o:e,i:o,next:r,l:s})}const o=document.getElementById("score-header");let r,s,i,l;function u(e,l){let u;if(r=e,s=l,null!==l){const n=l.toLowerCase().split(" ");u=t.filter((t=>{const e=t.content.firstElementChild.textContent.toLowerCase();return n.every((t=>e.includes(t)))}))}else u=[...t];if(null!==e)switch(u.sort(((t,n)=>{const c=t=>{const n=t.content.firstElementChild.getElementsByClassName("score")[0];if(void 0===n)return 1/0;const c=parseFloat(n.textContent);switch(e.direction){case"ascending":return c;case"descending":return-c;default:throw new Error(`unknown sort direction ${e.direction}`)}};return c(t)-c(n)})),e.direction){case"ascending":o.textContent="Score ↑";break;case"descending":o.textContent="Score ↓"}else o.textContent="Score ↕";i=[];for(let t=0;t<u.length;t+=n)i.push(u.slice(t,t+n));0===i.length&&i.push([]);for(const{o:t}of c)t.replaceChildren(i.length-1);d(0)}function d(t){e.replaceChildren();for(const n of i[t])for(const t of n.content.children)e.append(t.cloneNode(!0));for(const{t:n,o:e,i:o,next:r,l:s}of c)0===t?(n.disabled=!0,o.disabled=!0):0===l&&(n.disabled=!1,o.disabled=!1),t===i.length-1?(e.disabled=!0,r.disabled=!0):(e.disabled=!1,r.disabled=!1),s.replaceChildren(t);l=t}u(null,null),o.parentElement.addEventListener("click",(()=>{null===r?u({direction:"descending"},s):"descending"===r.direction?u({direction:"ascending"},s):"ascending"===r.direction&&u(null,s)}));for(const{t:t,o:n,i:e,next:o,l:r}of c){t.addEventListener("click",(()=>d(0))),n.addEventListener("click",(()=>d(i.length-1))),e.addEventListener("click",(()=>d(Math.max(0,l-1)))),o.addEventListener("click",(()=>d(Math.min(i.length-1,l+1))));let c=!1;r.addEventListener("click",(()=>{if(c)return;c=!0;const t=document.createElement("input");r.replaceChildren(t);const n=()=>{if(!c)return;c=!1;let n=parseInt(t.value);isNaN(n)?r.replaceChildren(l):(n=Math.max(0,Math.min(i.length-1,n)),n!==l?d(n):r.replaceChildren(l))};t.addEventListener("blur",(()=>n())),t.addEventListener("keypress",(t=>{"Enter"===t.key&&n()})),t.focus()}))}const[f,a]=document.getElementById("filter").children;f.addEventListener("input",(()=>{u(r,f.value)})),a.addEventListener("click",(()=>{f.value="",u(r,"")}));
